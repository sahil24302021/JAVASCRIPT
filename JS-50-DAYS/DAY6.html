<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Currency Tracker</title>
</head>

<body>
	<form onsubmit="getCurrency(event)">
		<input
			type="text"
			id="currencyInput"
			name="currencyCode"
			placeholder="INR, EUR, CAD"
			pattern="^[A-Z]{3}$"
			autocomplete="off"
			autofocus
			required
		/>
		<input type="submit" value="Get Rate" />
	</form>

	<div id="results"></div>

	<script>
		async function getCurrency(event) {
			event.preventDefault();

			const input = document.getElementById('currencyInput');
			const results = document.getElementById('results');

			const currencyCode = input.value.trim().toUpperCase();
			results.textContent = '';

			try {
				const resp = await fetch('https://api.exchangerate-api.com/v4/latest/USD');
				if (!resp.ok) throw new Error('Network response was not ok');

				const data = await resp.json();
				const currencyRate = data.rates?.[currencyCode];

				if (currencyRate !== undefined) {
					results.textContent = `1 USD = ${currencyRate} ${currencyCode}`;
				} else {
					results.textContent = `${currencyCode} does not exist`;
				}
			} catch (err) {
				results.textContent = 'Error fetching rates';
				console.error(err);
			}
		}
	</script>
</body>
</html>
